{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rober\\\\school\\\\Strony-internetowe\\\\projekt mailer\\\\mailbox\\\\src\\\\pages\\\\mailbox\\\\Mailbox.js\",\n  _s = $RefreshSig$();\nimport './Mailbox.scss';\nimport axios from 'axios';\nimport React, { createRef, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Mailbox = () => {\n  _s();\n  const titleRef = /*#__PURE__*/createRef();\n  const contentRef = /*#__PURE__*/createRef();\n  const senderRef = /*#__PURE__*/createRef();\n  const receiverRef = /*#__PURE__*/createRef();\n  const [users, setUsers] = useState([]);\n  const navigate = useNavigate();\n  const getUsers = async () => {\n    const response = await axios.get('/api/mailbox', {\n      headers: {\n        Authentication: localStorage.getItem('token')\n      }\n    });\n    setUsers(response.data.users);\n  };\n  const [messages, setMessages] = useState([]);\n  const getMessages = async () => {\n    const response = await axios.get('/api/posts', {\n      headers: {\n        Authentication: localStorage.getItem('token')\n      }\n    });\n    setMessages(response.data.messages);\n  };\n  useEffect(() => {\n    if (!localStorage.getItem('token')) navigate('/');\n    getUsers();\n    getMessages();\n  }, []);\n  const sendEmailHandler = e => {\n    e.preventDefault();\n    const title = titleRef.current.value,\n      content = contentRef.current.value,\n      receiver = receiverRef.current.value;\n    const data = {\n      title,\n      content,\n      receiver\n    };\n    sendEmail(data);\n  };\n  const sendEmail = async data => {\n    await axios.post('/api/mailbox', data, {\n      headers: {\n        Authentication: localStorage.getItem('token')\n      }\n    });\n    await Swal.fire({\n      icon: 'success',\n      title: 'Wysłano',\n      text: 'Wysłano wiadomość',\n      timer: 3000\n    });\n    getUsers();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Mailbox-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Mailer admin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Mailbox-inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: titleRef,\n          placeholder: \"Tytu\\u0142\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          ref: contentRef,\n          placeholder: \"Tre\\u015B\\u0107\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: receiverRef,\n          children: users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: user.email,\n            children: user.email\n          }, user._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 44\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"o\",\n        onClick: sendEmailHandler,\n        children: \"Wy\\u015Blij\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Mailbox-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: message.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.sender\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.receiver\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message.read\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this)]\n      }, message._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 38\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n_s(Mailbox, \"ZsFNb7wXMjblFyNR2dB6rmouH74=\", false, function () {\n  return [useNavigate];\n});\n_c = Mailbox;\nexport default Mailbox;\nvar _c;\n$RefreshReg$(_c, \"Mailbox\");","map":{"version":3,"names":["axios","React","createRef","useEffect","useState","useNavigate","Swal","Mailbox","titleRef","contentRef","senderRef","receiverRef","users","setUsers","navigate","getUsers","response","get","headers","Authentication","localStorage","getItem","data","messages","setMessages","getMessages","sendEmailHandler","e","preventDefault","title","current","value","content","receiver","sendEmail","post","fire","icon","text","timer","map","user","email","_id","message","sender","read"],"sources":["C:/Users/rober/school/Strony-internetowe/projekt mailer/mailbox/src/pages/mailbox/Mailbox.js"],"sourcesContent":["import './Mailbox.scss';\r\nimport axios from 'axios';\r\nimport React, {createRef, useEffect, useState} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2'\r\n\r\n\r\n\r\nconst Mailbox = () => {\r\n    const titleRef = createRef();\r\n    const contentRef = createRef();\r\n    const senderRef = createRef();\r\n    const receiverRef = createRef();\r\n    const [users, setUsers] = useState([]);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const getUsers = async () => {\r\n        const response = await axios.get(\r\n            '/api/mailbox',\r\n        {\r\n            headers: {\r\n                Authentication: localStorage.getItem('token')\r\n            }\r\n        }\r\n        );\r\n        setUsers(response.data.users);\r\n    };\r\n\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    const getMessages = async () => {\r\n        const response = await axios.get(\r\n            '/api/posts',\r\n        {\r\n            headers: {\r\n                Authentication: localStorage.getItem('token')\r\n            }\r\n        }\r\n        );\r\n        setMessages(response.data.messages);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!localStorage.getItem('token')) navigate('/');\r\n        getUsers();\r\n        getMessages();\r\n    }, []);\r\n\r\n    \r\n\r\n    const sendEmailHandler = (e) => {\r\n        e.preventDefault();\r\n    const\r\n            title = titleRef.current.value,\r\n            content = contentRef.current.value,\r\n            receiver = receiverRef.current.value;\r\n\r\n        \r\n\r\n        const data = {title, content, receiver }\r\n        sendEmail(data);\r\n\r\n    };\r\n    const sendEmail = async (data) => {\r\n        await axios.post('/api/mailbox', data,{\r\n            headers: {\r\n                Authentication: localStorage.getItem('token')\r\n                \r\n            }\r\n        }\r\n        );\r\n        await Swal.fire({\r\n            icon: 'success',\r\n            title: 'Wysłano',\r\n            text: 'Wysłano wiadomość',\r\n            timer: 3000\r\n        });\r\n        getUsers();\r\n    };\r\n    \r\n\r\n    \r\n\r\n    return (\r\n        <div className='Mailbox-container'>\r\n            <h1>Mailer admin</h1>\r\n            <form>\r\n                <div className='Mailbox-inputs'>\r\n                    <input type='text' ref={titleRef} placeholder='Tytuł' />\r\n                    <textarea type='text' ref={contentRef} placeholder='Treść' />\r\n                    <select ref={receiverRef}>\r\n                        {users.map(user => <option key={user._id} value={user.email}>{user.email}</option>)}\r\n                    </select>\r\n                </div>\r\n                <button className=\"o\"onClick={sendEmailHandler}>Wyślij</button>\r\n\r\n            </form>\r\n            <div>\r\n            {messages.map(message => <div className=\"Mailbox-message\" key={message._id}>\r\n                <h2>{message.title}</h2>\r\n                <p>{message.content}</p>\r\n                <p>{message.sender}</p>\r\n                <p>{message.receiver}</p>\r\n                <p>{message.read}</p>\r\n            </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Mailbox;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}